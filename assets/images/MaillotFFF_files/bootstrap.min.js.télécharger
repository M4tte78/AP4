(()=>{"use strict";var __webpack_modules__=[,(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{let Browser,Platform;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Browser:()=>Browser,Platform:()=>Platform,UserAgent:()=>UserAgent,default:()=>__WEBPACK_DEFAULT_EXPORT__}),function(Browser){Browser[Browser.Unknown=0]="Unknown",Browser[Browser.Generic=1]="Generic",Browser[Browser.Chrome=2]="Chrome",Browser[Browser.Firefox=3]="Firefox",Browser[Browser.Safari=4]="Safari"}(Browser||(Browser={})),function(Platform){Platform[Platform.Unknown=0]="Unknown",Platform[Platform.GenericDesktop=1]="GenericDesktop",Platform[Platform.GenericMobile=2]="GenericMobile",Platform[Platform.IOS=3]="IOS",Platform[Platform.Android=4]="Android",Platform[Platform.MacOS=5]="MacOS",Platform[Platform.Windows=6]="Windows",Platform[Platform.Linux=7]="Linux"}(Platform||(Platform={}));class UserAgent{constructor(userAgentString){let platform=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.navigator.platform;this.rawUA=userAgentString,this.rawPlatform=platform,this.parse()}uaContains(wanted){return-1!==this.rawUA.indexOf(wanted)}platformContains(wanted){return-1!==this.rawPlatform.indexOf(wanted)}isDesktop(){switch(this.platform){case Platform.GenericDesktop:case Platform.MacOS:case Platform.Windows:case Platform.Linux:return!0;default:return!1}}isMobile(){switch(this.platform){case Platform.GenericMobile:case Platform.IOS:case Platform.Android:return!0;default:return!1}}isVAPIDPotentiallySupported(){return(this.isDesktop()||this.platform===Platform.Android)&&(this.browser===Browser.Chrome||this.browser===Browser.Firefox)}parse(){if(this.browser=Browser.Unknown,this.uaContains("Edge/")||this.uaContains("Trident/"))return this.browser=Browser.Generic,void(this.platform=Platform.Windows);if(this.uaContains("iPhone")||this.uaContains("iPad")||this.uaContains("CriOS"))return this.browser=Browser.Generic,void(this.platform=Platform.IOS);if(this.uaContains("Android")?this.platform=Platform.Android:(this.uaContains("Mobi")||this.uaContains("Tablet"))&&(this.platform=Platform.GenericMobile),this.platform!==Platform.Android&&(this.platform=Platform.GenericDesktop),this.platform===Platform.GenericDesktop&&(this.platformContains("Mac")?this.platform=Platform.MacOS:this.platformContains("Win")?this.platform=Platform.Windows:(this.platformContains("Linux")||this.platformContains("X11"))&&(this.platform=Platform.Linux)),this.uaContains("Chrome/")||this.uaContains("Chromium/"))return this.browser=Browser.Chrome,void(this.platform===Platform.Android&&(this.uaContains("; wv")||this.uaContains("(wv;")||this.uaContains("Chrome/30.0.0.0")||this.uaContains("Chrome/33.0.0.0"))&&(this.browser=Browser.Generic));if(this.uaContains("Firefox/"))this.browser=Browser.Firefox;else if(this.uaContains("Version/")&&this.platform===Platform.Android)this.browser=Browser.Generic;else{if(this.uaContains("Safari/"))return this.browser=Browser.Safari,void(this.platform===Platform.GenericDesktop&&(this.platform=Platform.MacOS));this.browser=Browser.Unknown,this.platform===Platform.GenericDesktop&&(this.platform=Platform.Unknown)}}}const __WEBPACK_DEFAULT_EXPORT__=UserAgent},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{SDK_API_LVL:()=>SDK_API_LVL,SDK_VERSION:()=>SDK_VERSION,SDK_MAJOR_VERSION:()=>SDK_MAJOR_VERSION,SDK_DISMISS_NOTIF_AFTER:()=>SDK_DISMISS_NOTIF_AFTER,RETRY_MAX_ATTEMPTS:()=>RETRY_MAX_ATTEMPTS,RETRY_MIN_INTERVAL_MS:()=>RETRY_MIN_INTERVAL_MS,SSL_SCRIPT_URL:()=>SSL_SCRIPT_URL,WS_URL:()=>WS_URL,SAFARI_WS_URL:()=>SAFARI_WS_URL,ICONS_URL:()=>ICONS_URL,IS_DEV:()=>IS_DEV,IS_TEST:()=>IS_TEST,IS_WEBPACK_DEV_SERVER:()=>IS_WEBPACK_DEV_SERVER});const SDK_API_LVL="1",SDK_VERSION="3.5.0",SDK_MAJOR_VERSION="3",SDK_DISMISS_NOTIF_AFTER=30,RETRY_MAX_ATTEMPTS=3,RETRY_MIN_INTERVAL_MS=1e3,SSL_SCRIPT_URL="via.batch.com",WS_URL="https://ws.batch.com/web",SAFARI_WS_URL="https://safari-ws.batch.com",ICONS_URL="https://icons.batch.com",IS_DEV=!1,IS_TEST=!1,IS_WEBPACK_DEV_SERVER=!1}],__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__.r=exports=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.r(__webpack_exports__);var com_batch_shared_helpers_user_agent__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_config__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);const VERSION_MAJOR="rolling"===_config__WEBPACK_IMPORTED_MODULE_1__.SDK_VERSION?_config__WEBPACK_IMPORTED_MODULE_1__.SDK_VERSION:_config__WEBPACK_IMPORTED_MODULE_1__.SDK_VERSION.split(".")[0],appendScript=url=>{const tag=document.createElement("script");tag.async=!0,tag.src=url;const firstTagElem=document.getElementsByTagName("script")[0];firstTagElem.parentNode&&firstTagElem.parentNode.insertBefore(tag,firstTagElem)};(()=>{const dummyConsole={error:_msg=>{},debug:_msg=>{},log:_msg=>{}},safeConsole="object"==typeof console&&null!==console?Object.assign(dummyConsole,console):dummyConsole;let bootstrapOptions=window.batchSDKBootstrapOptions;if("object"==typeof bootstrapOptions&&null!==bootstrapOptions||(bootstrapOptions={}),!self.fetch)return void safeConsole.error("[Batch] 'fetch' is missing on self, refusing to load.");if("undefined"==typeof Promise)return void safeConsole.error("[Batch] Promises aren't available, refusing to load.");const userAgent=new com_batch_shared_helpers_user_agent__WEBPACK_IMPORTED_MODULE_0__.UserAgent(window.navigator.userAgent);if("1"===localStorage.getItem("__batchSDK__.forceMobileSafari"))console.log("[Batch] Force enabling mobile safari");else if(userAgent.platform===com_batch_shared_helpers_user_agent__WEBPACK_IMPORTED_MODULE_0__.Platform.IOS&&userAgent.browser===com_batch_shared_helpers_user_agent__WEBPACK_IMPORTED_MODULE_0__.Browser.Safari&&(!("standalone"in navigator)||!1===navigator.standalone))return void safeConsole.debug("[Batch] Website is running in an iOS browser but isn't installed as a standalone app, refusing to load.");if(!("Notification"in window)){if(!0!==bootstrapOptions.allowNoNotification)return void safeConsole.debug("[Batch] 'Notification' isn't available on window, refusing to load.");safeConsole.debug("[Batch] Enabling SDK without Notification support.")}if(-1===Promise.toString().indexOf("[native code]")){const baseWarning="[Batch] Using non-standard Promises";if(!0!==bootstrapOptions.unsafe_allowNonNativePromises)return void console.error(baseWarning+", refusing to load.");console.debug(baseWarning+".")}_config__WEBPACK_IMPORTED_MODULE_1__.IS_WEBPACK_DEV_SERVER?appendScript("/sdk.min.js"):fetch("https://".concat(_config__WEBPACK_IMPORTED_MODULE_1__.SSL_SCRIPT_URL,"/manifest.json")).then(response=>{response.json().then(manifest=>{Object.prototype.hasOwnProperty.call(manifest,"latest")&&Object.prototype.hasOwnProperty.call(manifest.latest,VERSION_MAJOR)&&appendScript("https://".concat(_config__WEBPACK_IMPORTED_MODULE_1__.SSL_SCRIPT_URL,"/").concat(manifest.latest[VERSION_MAJOR],"/sdk.min.js"))})}).catch(err=>{console.log("Batch SDK was unable to start",err)})})()})()})();