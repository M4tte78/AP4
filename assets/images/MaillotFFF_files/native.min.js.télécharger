(()=>{"use strict";var __webpack_modules__={9:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{let Permission;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Permission:()=>Permission}),function(Permission){Permission.Default="default",Permission.Granted="granted",Permission.Denied="denied"}(Permission||(Permission={}))},27:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var LocalSDKEvent;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__}),function(LocalSDKEvent){LocalSDKEvent.All="*",LocalSDKEvent.SessionStarted="sessionStarted",LocalSDKEvent.ProfileChanged="profileChanged",LocalSDKEvent.SubscriptionChanged="subscriptionChanged",LocalSDKEvent.UiComponentReady="uiComponentReady",LocalSDKEvent.UiComponentDrawn="uiComponentDrawn",LocalSDKEvent.UiReady="uiReady",LocalSDKEvent.HashChanged="hashChanged",LocalSDKEvent.ExitedProbation="exitedProbation",LocalSDKEvent.DataChanged="dataChanged"}(LocalSDKEvent||(LocalSDKEvent={}));const __WEBPACK_DEFAULT_EXPORT__=LocalSDKEvent}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}__webpack_require__.d=(exports,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)&&Object.defineProperty(exports,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__.r=exports=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.r(__webpack_exports__);var com_batch_dom_sdk_impl_sdk__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9),com_batch_shared_local_sdk_events__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(27);const LSKEY="_batch_ui_native_prompt_dismissed";class NativeRequest{constructor(api,config){this.api=api,this.conf=Object.assign({autoShow:!0,backoffDuration:86400},config)}draw(_){this.conf.autoShow&&this.show()}async show(){let force=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(window.safari)return void this.api.subscribe();const dismissed=+window.localStorage.getItem(LSKEY),now=Math.round((new Date).getTime()/1e3);if(Notification.permission===com_batch_dom_sdk_impl_sdk__WEBPACK_IMPORTED_MODULE_0__.Permission.Granted)this.api.subscribe();else if(Notification.permission!==com_batch_dom_sdk_impl_sdk__WEBPACK_IMPORTED_MODULE_0__.Permission.Denied&&(force||!dismissed||0===this.conf.backoffDuration||now-dismissed>this.conf.backoffDuration)){const permission=await Notification.requestPermission();permission&&(window.localStorage.setItem(LSKEY,Math.round((new Date).getTime()/1e3)+""),permission===com_batch_dom_sdk_impl_sdk__WEBPACK_IMPORTED_MODULE_0__.Permission.Granted&&this.api.subscribe())}}hide(){}reset(){window.localStorage.removeItem(LSKEY)}}window.batchSDK("ui.register","native",(api,conf,onDrawnCallback)=>{const native=new NativeRequest(api,conf);return api.on(com_batch_shared_local_sdk_events__WEBPACK_IMPORTED_MODULE_1__.default.UiReady,(_,sub)=>{native.draw(sub),onDrawnCallback(native)}),native})})()})();