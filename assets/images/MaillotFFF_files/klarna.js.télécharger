(()=>{"use strict";var e,t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{ALL:()=>K,DEBUG:()=>U,ERROR:()=>L,FATAL:()=>R,INFO:()=>T,OFF:()=>_,TRACE:()=>O,WARN:()=>A}),function(e){e.fatal="fatal",e.error="error",e.warning="warning",e.log="log",e.info="info",e.debug="debug",e.critical="critical"}(e||(e={}));const r=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,s=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,o=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,a="?",i=/^(?:(\w+):)\/\/(?:([\w-]+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function c(e){return(e&&e.message||"No error message").split("\n").filter((e=>!!e))[0]}function l(e){try{const t=function(e){if(!e.stack)return null;const t=[],n=e.stack.split("\n");let i,l;for(let c=0;c<n.length;++c){if(i=r.exec(n[c]))l={filename:i[2]&&0===i[2].indexOf("address at ")?i[2].substr(11):i[2],function:i[1]||a,lineno:i[3]?+i[3]:null,colno:i[4]?+i[4]:null};else if(i=o.exec(n[c]))l={filename:i[2],function:i[1]||a,lineno:+i[3],colno:i[4]?+i[4]:null};else{if(!(i=s.exec(n[c])))continue;0!==c||i[5]||void 0===e.columnNumber||(t[0].column=e.columnNumber+1),l={filename:i[3],function:i[1]||a,lineno:i[4]?+i[4]:null,colno:i[5]?+i[5]:null}}!l.function&&l.lineno&&(l.function=a),t.push(l)}return t.length?{value:c(e),type:e.name,stacktrace:{frames:t.reverse()}}:null}(e);if(t)return t}catch(e){}return{value:c(e),type:e&&e.name,stacktrace:{frames:[]}}}class u{constructor(e){if(e&&e.dsn){const t=i.exec(e.dsn),n=t?t.slice(1):[],r=n[5].split("/"),s=r.slice(0,-1).join("/");this.apiUrl=n[0]+"://"+n[3]+(n[4]?":"+n[4]:"")+(s?"/"+s:"")+"/api/"+r.pop()+"/store/",this.authHeader="Sentry sentry_version=7,sentry_key="+n[1]+(n[2]?",sentry_secret="+n[2]:"")}this.environment=e&&e.environment}prepare(e){return{...this.getRequestBlank(),exception:{values:[l(e)]}}}report(e){this.send(this.prepare(e))}send(e){this.apiUrl&&e&&this.createRequest(e)}createRequest(e){const t=new XMLHttpRequest;t.open("POST",this.apiUrl,!0),t.setRequestHeader("Content-type","application/json"),t.setRequestHeader("X-Sentry-Auth",this.authHeader||""),t.send(JSON.stringify(e))}getRequestBlank(){return{platform:"javascript",event_id:"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),sdk:{name:"micro-sentry.javascript.core",version:"0.0.0"},timestamp:Date.now()/1e3,environment:this.environment}}}function d(e,t){return"[object RegExp]"===Object.prototype.toString.call(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t)}function p(){return window}class f extends u{constructor(e,t=p()){super(e),this.options=e,this.window=t,this.destroyed=!1,this._state={};const{plugins:n=[],beforeSend:r=(e=>e),beforeBreadcrumb:s=(e=>e),blacklistUrls:o=[],ignoreErrors:a=[],release:i}=this.options||{};this.plugins=n.map((e=>new e(this))),this.beforeSend=r,this.beforeBreadcrumb=s,this.blacklistUrls=o,this.ignoreErrors=a,this.release=i}get state(){return this._state}clearState(){this._state={}}setTags(e){return this.setKeyState("tags",{...e}),this}setTag(e,t){return this.extendState({tags:{[e]:t}}),this}setExtra(e,t){return this.extendState({extra:{[e]:t}}),this}setExtras(e){return this.setKeyState("extra",{...e}),this}setUser(e){return this.setKeyState("user",{...e}),this}clone(){const e=new f({...this.options,plugins:[]});return e.extendState(this.state),e}withScope(e){const t=this.clone();e(t),t.destroy(),this.setBreadcrumbs(void 0)}addBreadcrumb(e){this.extendState({breadcrumbs:[{timestamp:Date.now()/1e3,...this.beforeBreadcrumb(e)}]})}setBreadcrumbs(e){this.setKeyState("breadcrumbs",e)}captureMessage(e,t){this.send({...this.getRequestBlank(),message:e,level:t})}destroy(){this.destroyed=!0,this.plugins.forEach((e=>{e.destroy&&e.destroy()}))}isIgnoredError(e){return!!this.ignoreErrors.length&&this.getPossibleEventMessages(e).some((e=>this.ignoreErrors.some((t=>d(e,t)))))}getRequestBlank(){return{request:{url:this.window.location.toString(),headers:{"User-Agent":this.window.navigator.userAgent}},...super.getRequestBlank(),sdk:{name:"micro-sentry.javascript.browser",version:"0.0.0"},...this.state}}send(e){this.destroyed||this.isDeniedUrl(e)||this.isIgnoredError(e)||(super.send(this.beforeSend({release:this.release,...e})),this.setBreadcrumbs(void 0))}getPossibleEventMessages(e){if(e.message)return[e.message];if(e.exception)try{const{type:t="",value:n=""}=e.exception.values&&e.exception.values[0]||{};return[`${n}`,`${t}: ${n}`]}catch(e){return[]}return[]}isDeniedUrl(e){if(!this.blacklistUrls.length)return!1;const t=this.getEventFilterUrl(e);return!!t&&this.blacklistUrls.some((e=>d(t,e)))}getEventFilterUrl(e){try{if(e.exception){const t=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return t&&t[t.length-1].filename||null}return null}catch(e){return null}}extendState(e){this._state=Object.keys(e).reduce(((t,n)=>{const r=this._state[n],s=Array.isArray(r)?r:null,o=e[n],a=Array.isArray(o)?o:null;return{...t,[n]:s||a?[...s||[],...a||[]]:{..."string"!=typeof r?r:{},..."string"!=typeof o?o:{}}}}),this._state)}setKeyState(e,t){this._state[e]=t}}var m;!function(e){e.sessionStorageNotSupported="sessionStorage-not-supported",e.localStorageNotSupported="localStorage-not-supported",e.dynamicImportFailed="dynamic-import-failed",e.multipleCustomElementsWithSameTagName="multiple-custom-elements-same-tag-name",e.unexpectedTokenMethodParamsList="unexpected-token-method-params-list",e.missingColonAfterPropertyId="missing-colon-after-property-id",e.unexpectedTokenEqual="unexpected-token-equal",e.expectedExpressionGotEqual="expected-expression-got-equal"}(m||(m={}));const g=["https://s3.int.klarna.net","https://js.klarna.com","https://x.klarnacdn.net","https://x.nonprod.us1.js.klarna.net","https://osm.klarnaservices.com","https://eu-assets.playground.klarnaservices.com","https://na-assets.playground.klarnaservices.com","https://ap-assets.playground.klarnaservices.com"],h=e=>100*Math.random()<e,y=["Unexpected token '","Storage type: ","Failed to fetch dynamically imported module","Missing runtime config","Failed to execute 'define","Importing a module script failed.","NetworkError when attempting to fetch resource"];let v;const b=({version:e,environment:t,tags:n})=>("staging"===t?v={report:console.log,setTags:()=>{},setTag:()=>{}}:v||(v=new f({dsn:"https://6fdc8e6e634d4a998b6f0dbfd7b025e1@o24547.ingest.sentry.io/4505471301713920",release:e,environment:t,beforeSend:e=>{e.exception?.values?.forEach((({value:t})=>{e.fingerprint=(e=>{switch(e){case"Storage type: sessionStorage not supported":return[m.sessionStorageNotSupported];case"Storage type: localStorage not supported":return[m.localStorageNotSupported];case"Cannot define multiple custom elements with the same tag name":return[m.multipleCustomElementsWithSameTagName];case"Unexpected token ';'. Expected an opening '(' before a method's parameter list.":return[m.unexpectedTokenMethodParamsList];case e.match(/Failed to fetch dynamically imported module/)?.input:return[m.dynamicImportFailed];case e.match("missing : after property id")?.input:return[m.missingColonAfterPropertyId];case e.match("Unexpected token '='")?.input:return[m.unexpectedTokenEqual];case e.match("expected expression, got '='")?.input:return[m.expectedExpressionGotEqual];case e.match(/error loading dynamically imported module/)?.input:return[m.dynamicImportFailed]}})(t)}));const t=(e=>{let t=!0;return e.exception?.values?.forEach((({stacktrace:e})=>{e?.frames?.forEach((({filename:e})=>{var n;n=e,t=!g.some((e=>n.startsWith(e)))}))})),t?null:e})(e);return t?(e=>{let t=!0;return e.exception?.values?.forEach((({value:e})=>{y.forEach((n=>{e.includes(n)&&(t=h(5))}))})),t?e:null})(t):null},blacklistUrls:[/pagead\/js/i,/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/extensions\//i,/^chrome:\/\//i,/metrics\.itunes\.apple\.com\.edgesuite\.net\//i]})),n&&Object.entries(n).forEach((([e,t])=>{t&&v.setTag(e,t)})),v);function w(e){const t="string"==typeof e?new Error(e):e;(()=>{if(!v)throw new Error("Sentry client not initialized");return v})().report(t)}var x;!function(e){e.localStorage="localStorage",e.sessionStorage="sessionStorage",e.klarnaIframeStorage="klarnaIframeStorage"}(x||(x={}));const S=e=>{const t=`__klarna_sdk_${e}`;try{return function(e,t=window){if(!t?.localStorage)throw new Error(`client does not support ${x.localStorage}`);const n=()=>JSON.parse(t.localStorage.getItem(e)||"{}"),r={get:e=>{const t=n(),s=t?.[e];if(!s)return null;const o=t?.ttl;return o&&o<Date.now()?(r.flush(),null):s},set:(r,s)=>{const o=n();return null===s?delete o[r]:o[r]=s,t.localStorage.setItem(e,JSON.stringify(o))},remove:e=>r.set(e,null),flush:()=>t.localStorage.removeItem(e)};return r}(t)}catch{w("Storage type: localStorage not supported")}},k="version";var E;!function(e){e.websdk="websdk",e.osm="osm-client-script",e.identitySdk="identity-sdk"}(E||(E={}));const I={create:function(e,t){(new e.Image).src=t}},j={create:function(e,t,n){e.navigator.sendBeacon(t,JSON.stringify(n))}};var K=0,O=0,U=1,T=2,A=3,L=4,R=5,_=6,P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D="/v1/";const M={};let N={};function C(e){let t=T;const r=(n,r={},s={},o=T)=>{o<t||M[e]&&M[e].event(n,{level:o,...s,...N,...r},{},o)},s=(e,t)=>(n,r={},s={})=>e(n,r,s,t);return{configure:({options:t,data:n={},instanceId:r})=>{N=n,M[e]||(M[e]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if("object"!==(void 0===e?"undefined":$(e))||!e)throw new TypeError("expected configuration object");var n=e.baseUrl,r=void 0===n?"https://eu.klarnaevt.com":n,s=e.client,o=e.clientVersion,a=e.sessionId,i=e.commonData,c=void 0===i?{}:i,l=e.instanceId,u=void 0===l?Math.floor(9e3*Math.random())+1e3:l,d=e.logLevel||K;if("string"!=typeof s)throw new TypeError("expected `client` in the configuration object");if("string"!=typeof o)throw new TypeError("expected `clientVersion` in the configuration object");if("string"!=typeof a)throw new TypeError("expected `sessionId` in the configuration object");if("number"!=typeof d||d<K||d>_)throw new TypeError("invalid `logLevel` ("+d+")");function p(e){return Object.keys(e).sort().map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}function f(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if(!(d>(arguments.length>3&&void 0!==arguments[3]?arguments[3]:K))){if(!e)throw new TypeError("expected `name` as first parameter");var l=function(e,t){return""+r+D+s+"/"+o+"/"+e+"?"+p(t)}(e,n=P({},c,n,{iid:u,sid:a,timestamp:n.timestamp||(new Date).getTime()}));try{j.create(t,l,i)}catch(e){i&&(l+="&"+p(i)),I.create(t,l)}}}return{event:f,trace:function(e,t,n){f(e,t,n,O)},debug:function(e,t,n){f(e,t,n,U)},info:function(e,t,n){f(e,t,n,T)},warn:function(e,t,n){f(e,t,n,A)},error:function(e,t,n){f(e,t,n,L)},fatal:function(e,t,n){f(e,t,n,R)},setLogLevel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K;if("number"!=typeof e||e<K||e>_)throw new TypeError("invalid `logLevel` ("+e+")");d=e},getConfig:function(){return{baseUrl:r,client:s,clientVersion:o,sessionId:a,instanceId:u,logLevel:d}}}}(q({...t,instanceId:r})))},event:r,trace:s(r,O),debug:s(r,U),info:s(r,T),warn:s(r,A),error:s(r,L),fatal:s(r,R),setLogLevel(r="ALL"){try{const s=r.toUpperCase();t=s in n?n[s]:K,M[e]&&M[e].setLogLevel(t)}catch(e){}},removeInstance(){M[e]&&delete M[e]}}}const q=({client:e="sdk",clientVersion:t="",sessionId:n="",instanceId:r,baseUrl:s=""})=>({client:e,clientVersion:t,environment:"production",sessionId:n,instanceId:r,baseUrl:s});function V(){const e=new CustomEvent("OSM:refresh");return document.dispatchEvent(e),null}const F=[];class B extends Array{constructor(){super(...arguments),this.refresh=V}pop(){return F.pop()}push(e){return F.push(e),F.length}}(async function(e=window){const{isWebSDKAvailable:t}=((e=window)=>{const t=!!e.Klarna,n=!!(e=>e.Klarna&&e.Klarna.Credit&&e.Klarna.DirectBankTransfer&&e.Klarna.DirectDebit&&e.Klarna.Payments)(e),r=!!(e=>e.Klarna&&e.Klarna.Identity&&e.Klarna.Messaging&&e.Klarna.OnsiteMessaging&&e.Klarna.Payment)(e);return{isKlarnaNamespaceAvailable:t,isKPLibAvailable:n,isWebSDKAvailable:r}})(e),n=((e=document)=>e?.currentScript??e?.scripts?.[e?.scripts?.length-1])(),{accountId:r,clientId:s,clientKey:o,clientToken:a,version:i,sessionIdentifier:c}=n?.dataset||{},l=n?.dataset?.environment||"production",u=s||o,d=new URL(n?.src),p=d?.searchParams?.get("ready"),f=e[p??"KlarnaSDKCallback"]??e.KlarnaSDKCallback;if(t)return void("function"==typeof f&&f(e.Klarna));if(e.Klarna=e.Klarna||{},(e=>{e.KlarnaOnsiteService=new B,e.kudt=e.KlarnaOnsiteService,e.OnsiteMessaging={refresh:V,eventListeners:{},on:()=>{}}})(e),!u&&!a)throw new Error("MISSING `data-client-key` or `data-client-id` attribute");if(!["production","playground","staging"].includes(l))throw new Error('Only "production", "playground" and "staging" environments are supported');let m,g=i,y="https://js.klarna.com/web-sdk/";const v={accountId:r,clientId:u,product:"entrypoint",sessionIdentifier:c},x=C(E.websdk);try{g?(m={lib:{defaultVersion:g}},y+=(e=>new RegExp("^([0-9]|[1-9][0-9]*).([0-9]|[1-9][0-9]*).([0-9]|[1-9][0-9]*)?$").test(e))(g)?`v1/${g}/`:`${g}/`):(m=await(async(e,t="production")=>{const n="production"===t?"runtime-config":`runtime-config-${t}`;try{const t=await fetch(`${e}config/${n}.json`);if(!t.ok)throw new Error(`Failed to fetch configuration. Server responded with status ${t.status}: ${t.statusText}`);return await t.json()}catch(e){return null}})("https://js.klarna.com/web-sdk/",l),g=(e=>{if(!e)throw new Error("Missing runtime config");try{const t=S(k);e.lib.defaultVersion!==e.lib.canaryVersion&&"true"!==e.lib.flushVersion||(t.remove("version"),t.remove("rolloutVariant"),t.remove("ttl"));const n=t.get("version");if(n)return n;{const t=(({defaultVersion:e,canaryVersion:t,canaryWeight:n,ttl:r=86400})=>{const s=S(k),o=Date.now()+1e3*r;return s.set("ttl",o.toString()),h(100*n)?h(50)?(s.set("rolloutVariant","canary"),s.set("version",t),t):(s.set("rolloutVariant","control"),s.set("version",e),e):(s.set("rolloutVariant","none"),s.set("version",e),e)})(e.lib);if(t)return t;throw new Error("Failed to set rollout and version")}}catch(t){if(e.lib.defaultVersion)return e.lib.defaultVersion;throw new Error(`Failed to get version: ${t.message}`)}})(m),y+=`v1/${g}/`),b({environment:l,version:g,tags:v});const t=`${y}sdk.js`,{default:n}=await import(t),s=new n({accountId:r,baseUrl:y,clientId:u,clientToken:a,version:g,runtimeConfig:m,environment:l,sessionIdentifier:c});e.Klarna=Object.assign(s.getPublicAPI(),e.Klarna),"function"==typeof f&&f(e.Klarna)}catch(t){x.event("metric_fallback_script_loaded",{message:t?.message});try{const t="https://js.klarna.com/web-sdk/v1/fallback/",n=`${t}sdk.js`,{default:s}=await import(n),o=new s({accountId:r,baseUrl:t,clientId:u,clientToken:a,version:"fallback",runtimeConfig:m,environment:l,sessionIdentifier:c});e.Klarna=Object.assign(o.getPublicAPI(),e.Klarna)}catch(e){throw w(e),new Error("Failed to load the main SDK and the fallback SDK. CDN URL might be incorrect")}"function"==typeof f&&f(e.Klarna)}})().catch((()=>{}))})();